### Документация к библиотеке EAprotocol

#### Описание
Библиотека **EAprotocol** предназначена для обработки сообщений и команд, полученных через последовательный порт. Она поддерживает регистрацию команд с обработчиками, чтение данных из последовательного порта, выполнение команд и логирование.

#### Основные возможности:
- Прием данных через аппаратный последовательный порт (`HardwareSerial`).
- Буферизация входящих данных.
- Регистрация и обработка до 5 команд.
- Отправка данных через последовательный порт.
- Удобная структура для работы с протоколом на основе маркеров (`COMMAND_MARKER`) и разделителей (`COMMAND_DIVIDER`).
- Логирование с использованием библиотеки **ArduinoLog**.

---

### Как использовать библиотеку

#### 1. Подключение и создание объекта
```cpp
#include <EAProtocol.h>

HardwareSerial &serialPort = Serial1; // Используем аппаратный последовательный порт
EAprotocol protocol(serialPort);
```

#### 2. Инициализация
Перед началом работы необходимо инициализировать библиотеку:
```cpp
protocol.begin(); // Настройка скорости последовательного порта и очистка буфера
```

#### 3. Регистрация команд
Для обработки команд необходимо зарегистрировать их с указанием имени и функции-обработчика:
```cpp
void handleSendToServer(const char* args) {
    Serial.println(args); // Пример обработки команды
}

protocol.registerCommand("SENDTOSERV", handleSendToServer);
```

#### 4. Обработка входящих данных
В основном цикле программы вызывайте метод `tick()`, который обрабатывает входящие данные:
```cpp
void loop() {
    protocol.tick();
}
```

#### 5. Отправка данных
Отправить команду с данными можно с помощью метода `sendCommand`:
```cpp
protocol.sendCommand("SENDTOSERV", "12;13;1422455");
```

---

### Описание основных методов

| Метод                     | Описание                                                                                              |
|---------------------------|-------------------------------------------------------------------------------------------------------|
| `EAprotocol`              | Конструктор класса. Инициализирует последовательный порт, символ окончания сообщения и таймаут.       |
| `begin`                   | Инициализация последовательного порта и очистка буфера.                                              |
| `tick`                    | Основной цикл обработки входящих данных.                                                             |
| `registerCommand`         | Регистрация команды с указанием имени и функции-обработчика.                                         |
| `executeCommand`          | Выполнение команды по её имени.                                                                      |
| `sendCommand`             | Отправка команды с данными.                                                                          |
| `readDataToBuffer`        | Чтение данных из последовательного порта во внутренний буфер.                                        |
| `processMessage`          | Обработка сообщения из буфера (определение команды и её выполнение).                                 |
| `getBuff`                 | Возвращает содержимое внутреннего буфера.                                                            |
| `_handleLog`              | Логирование сообщений, не являющихся командами.                                                      |
| `hashString`              | Вычисление хеша строки для быстрого поиска зарегистрированных команд.                                 |

